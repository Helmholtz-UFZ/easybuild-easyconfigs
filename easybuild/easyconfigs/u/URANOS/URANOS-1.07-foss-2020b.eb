easyblock = 'MakeCp'

name = 'URANOS'
version = '1.07'

homepage = 'https://github.com/mkoehli/uranos/tree/main'
description = """Ultra Rapid Adaptable Neutron-Only Simulation for Environmental Research,
 is a Monte Carlo toolkit specifically tailored for environmental sciences."""

toolchain = {'name': 'foss', 'version': '2020b'}
toolchainopts = {'pic': True}

buildopts = 'CXXFLAGS="$CXXFLAGS -std=c++17"'

source_urls = ['https://github.com/mkoehli/uranos/archive/refs/tags/']
sources = [{'download_filename': 'v%(version)s.tar.gz', 'filename': 'v%(version)s.tar.gz'}]
checksums = ['79d69c8882c6bb40235d0d988b330882851dbe91eb15d4fb808af682c4800b7f']

prebuildopts = 'cd data && unzip IncomingSpectrum.zip && mkdir ENDF && unzip ENDFdata.zip -d ENDF && cd ../src && qmake && '

builddependencies = [
    ('ROOT','6.22.08'),
    ('Qt5','5.14.2')
]

dependencies = [
    ('ROOT', '6.22.08'),
    ('Qt5', '5.14.2')
]

files_to_copy = [(['src/UranosGUI'], 'bin'), (['data/IncomingSpectrum.root'], 'lib'), (['data/ENDF'], 'lib/ENDF')]

sanity_check_paths = {
    'files': ["bin/UranosGUI"],
    'dirs': [""],
}

moduleclass = 'tools'
